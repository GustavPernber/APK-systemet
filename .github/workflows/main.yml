name: 'Netlify Deploy'

on: [push]

jobs:
  deploy:
    name: 'Deploy'
    runs-on: ubuntu-latest

    steps:
      # - name: Checkout
      #   uses: actions/checkout@v1

      # - name: Deploy to netlify dev
      #   uses: jsmrcaga/action-netlify-deploy@master
      #   with:
      #     NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
      #     NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
      #     NETLIFY_DEPLOY_MESSAGE: "Prod deploy v${{ github.ref }}"
      #     NETLIFY_DEPLOY_TO_PROD: true
      
      - name: Run e2e tests
        # run: cypress install
        run: cypress install & npx cypress run





# name: Cypress Tests

# on: [push]

# jobs:
#   cypress-run:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2
#       # Install NPM dependencies, cache them correctly
#       # and run all Cypress tests
#       - name: Cypress run
#         uses: cypress-io/github-action@v4 # use the explicit version number
#         with:
#           build: npm run build
#           start: netlify dev

# name: 'Netlify Previews'

# on:
#   push:
#     branches-ignore: 
#       - master

# jobs:
#   deploy:
#     name: 'Deploy'
#     runs-on: ubuntu-latest

#     steps:
#       - uses: actions/checkout@v1

#       # Sets the branch name as environment variable
#       - uses: nelonoel/branch-name@v1.0.1
#       - uses: jsmrcaga/action-netlify-deploy@master
#         with:
#           NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
#           NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
#           deploy_alias: ${{ env.BRANCH_NAME }}
      
#       # Creates a status check with link to preview
#       - name: Status check
#         uses: Sibz/github-status-action@v1.1.1
#         with:
#           authToken: ${{ secrets.GITHUB_TOKEN }}
#           context: Netlify preview
#           state: success
#           target_url: https://${{ env.BRANCH_NAME }}--my-site.netlify.app
